{
  "kind": "build_request",
  "title": "Add Resident Dashboard features: announcements display and issue reporting",
  "projectName": "Bina Yönetim ERP",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-83",
      "text": "Update the ResidentDashboard component (frontend/src/pages/ResidentDashboard.tsx) to display a comprehensive announcements list section showing all building announcements with title (baslik), description (aciklama), creation date, and creator information in a card-based layout with proper spacing and Turkish section header 'Duyurular'",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-latest"
        ],
        "quotes": [
          "ekle",
          "Sakin Panelini ekleyelim mi? (Duyuruları görme, arıza bildirme)"
        ]
      },
      "acceptanceCriteria": [
        "AnnouncementsList component is integrated into ResidentDashboard",
        "Announcements are displayed in card format with all required fields",
        "Section has clear Turkish header 'Duyurular'",
        "Loading and error states are handled properly",
        "Empty state message is shown when no announcements exist"
      ]
    },
    {
      "id": "REQ-84",
      "text": "Create an issue reporting form component (IssueReportForm.tsx) in the frontend that allows SAKIN users to report building issues/faults with input fields for baslik (title), aciklama (description), and daireId (apartment selection via dropdown), form validation, and success/error feedback in Turkish",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-latest"
        ],
        "quotes": [
          "arıza bildirme"
        ]
      },
      "acceptanceCriteria": [
        "Form component accepts title, description, and apartment selection",
        "Apartment dropdown is populated from useListApartments query",
        "Form validation ensures all required fields are filled",
        "Success toast shows 'Arıza başarıyla bildirildi' message",
        "Error toast shows appropriate Turkish error messages",
        "Form resets after successful submission"
      ]
    },
    {
      "id": "REQ-85",
      "text": "Implement backend function arizaBildir(baslik: Text, aciklama: Text, daireId: Text) in backend/main.mo that creates a new Ariza record for the authenticated user's building, validates that the user has SAKIN role, generates a unique arizaId, stores it with status 'Açık' (open), and returns the created issue or appropriate error",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-latest"
        ],
        "quotes": [
          "arıza bildirme"
        ]
      },
      "acceptanceCriteria": [
        "Function validates caller is authenticated and has a building assignment",
        "Function validates caller has SAKIN role (or allows YETKILI/BINA_SAHIBI as well)",
        "Unique arizaId is generated for each issue",
        "Issue is stored with bildirenPrincipal set to caller's principal",
        "Initial status is set to 'Açık'",
        "Function returns success with created issue or error with Turkish message"
      ]
    },
    {
      "id": "REQ-86",
      "text": "Create React Query mutation hook useReportIssue in frontend/src/hooks/useQueries.ts that calls the arizaBildir backend function, handles loading states, and invalidates the 'issues' query cache on successful issue creation",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-latest"
        ]
      },
      "acceptanceCriteria": [
        "Hook uses useMutation from React Query",
        "Mutation calls backend arizaBildir function with provided parameters",
        "On success, invalidates 'issues' query cache to refresh issue lists",
        "Returns proper loading, error, and success states",
        "Error messages are properly propagated for display"
      ]
    },
    {
      "id": "REQ-87",
      "text": "Integrate the IssueReportForm component into the ResidentDashboard page with a clear Turkish section header 'Arıza Bildir', positioned below the announcements section with consistent spacing and layout matching OwnerDashboard patterns",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-latest"
        ],
        "quotes": [
          "arıza bildirme"
        ]
      },
      "acceptanceCriteria": [
        "IssueReportForm is displayed in ResidentDashboard",
        "Section header 'Arıza Bildir' is clear and prominent",
        "Form is positioned logically after announcements section",
        "Spacing and layout are consistent with other dashboard pages",
        "Form is responsive and works on mobile devices"
      ]
    },
    {
      "id": "REQ-88",
      "text": "Update the ResidentDashboard layout to organize the two feature sections (announcements display and issue reporting) in a clear, scannable two-column or stacked layout with proper card containers, consistent with OwnerDashboard and ManagerDashboard design patterns",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-latest"
        ]
      },
      "acceptanceCriteria": [
        "Layout uses consistent card/section containers",
        "Sections are clearly separated with appropriate spacing",
        "Design matches patterns from OwnerDashboard and ManagerDashboard",
        "Layout is responsive and adapts to different screen sizes",
        "All text labels are in Turkish"
      ]
    }
  ],
  "constraints": [
    "Do not modify backend/main.mo actor architecture - maintain single-actor pattern",
    "Do not modify immutable frontend paths: useInternetIdentity hooks, useActor.ts, main.tsx, or components/ui directory",
    "Maintain Turkish language for all user-facing text",
    "Follow existing role-based permission patterns from BINA_SAHIBI and YETKILI implementations"
  ],
  "nonGoals": [
    "Issue editing or deletion functionality",
    "Issue status management (marking as resolved/closed)",
    "Issue assignment to specific users",
    "Issue priority levels or categories",
    "Notification system for new issues",
    "File attachments for issues",
    "Comments or discussion threads on issues"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}